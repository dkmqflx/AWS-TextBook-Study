# 2.1 AWS 컴퓨팅 서비스

## 2.1.1 컴퓨팅 정의

- 컴퓨트(compute) : `계산하다`, `답을 구하다`, `추정하다`
- 컴퓨팅(computing) : 어떤 것에 대해 계산하여 답을 구하고 추정하는 행위.
- 컴퓨팅을 전문적으로 수행하기 위해 컴퓨팅을 목적으로 하는 특화된 장비(device)들이 있는데 `서버(server)`가 대표적이다.
- 서버(server) : 특수성과 전문성을 위해 **일반적인 컴퓨터에 비해 높은 사양이 요구되는 고성능 컴퓨팅** 자원이다.

<br />

## 2.1.2 AWS 컴퓨팅 서비스

### EC2(Elastic Compute Cloud) :

- 클라우드 환경에서 **서버 자원을 인스턴스(instance)라는 가상 머신(Virtual Machine, VM) 형태로 제공**하는 가장 기본적은 AWS 컴퓨팅 서비스.

### ECS(Elastic Container Service) :

- EC2 기반 관리형 클러스터에서 실행되는 **컨테이너 형태의 자원에 대해 배포, 스케줄링, 스케일링 등을 관리**하는 서비스.

### Lambda :

- 서버리스(serverless) 컴퓨팅 서비스로, 서버리스라는 말 그대로 **별도의 서버 설정이 없는 환경을 제공하여 코드만 실행**해 주는 서비스.

### Lightsail :

- 독립적인 환경을 제공하며, 최소한의 설정만으로도 손쉽게 사용 가능한 컴퓨팅 서비스.

<br />

## EC2와 Lightsail의 주요 차이점

### Lightsail

- 단순성: 초보자에게 친화적인 간소화된 인터페이스
- 패키지 요금제: 컴퓨팅, 스토리지, 대역폭이 포함된 고정 월별 요금
- 제한된 확장성: 간단한 웹사이트, 소규모 애플리케이션에 적합
- 간소화된 관리: 자동화된 백업, 모니터링, 로드 밸런싱 등 기본 기능 내장

### EC2

- 고급 설정: 더 많은 설정 옵션과 커스터마이징 가능
- 유연한 요금제: 온디맨드, 예약 인스턴스, 스팟 인스턴스 등 다양한 요금 옵션
- 뛰어난 확장성: 다양한 인스턴스 타입과 크기, 자동 스케일링 지원
- AWS 서비스 통합: 다른 AWS 서비스와의 깊은 통합 (VPC, EBS, IAM 등)

> 💡 결론  
> Lightsail은 단순하고 예측 가능한 비용으로 빠르게 시작하기 좋은 서비스이며,  
> EC2는 더 많은 제어와 확장성이 필요한 복잡한 워크로드에 적합합니다.  
> 백엔드 개발자로서 간단한 개발 환경이나 테스트에는 Lightsail이, 실제 프로덕션 환경이나 복잡한 아키텍처에는 EC2가 더 적합할 수 있습니다.

<br />
<br />

# 2.2 Amazon EC2 소개

- AWS의 퍼블릭 클라우드 환경에서 **확장 가능한 컴퓨팅 자원을 제공하여 가상의 서버를 운영**할 수 있는 서비스.
- 인스턴스라는 가상 컴퓨팅 환경을 기반으로 하며, `AMI(Amazon Machine Image)`를 이용하여 인스턴스에 필요한 소프트웨어 정보를 정의한다.

> 💡 **Elastic**
>
> - `탄력적인`이라는 뜻으로, 컴퓨팅 자원에 대해 원하는 만큼 확장하거나 축소하여 유연하게 사용할 수 있는 개념.

## 2.2.1 Amazon EC2 인스턴스

- `CPU`, `메모리`, `스토리지`, `네트워킹` 용량을 결정하는 다양한 인스턴스 유형을 제공한다.
- 클라우드 환경에서 컴퓨팅 자원을 필요한 만큼 사용하고, 쓰임을 다하면 자원을 반납하는 형태로 임의로 구성된 인스턴스.

### 인스턴스 유형

- 사용자 목적과 비즈니스 환경에 맞게 최적화된 선택을 할 수 있다.

- `범용` : 균형 있는 컴퓨팅 자원을 제공.
- `컴퓨팅 최적화` : 고성능 프로세서를 활용하는 컴퓨팅 집약적인 애플리케이션에 적합.
- `메모리 최적화` : 메모리에서 대규모 데이터를 처리하는 워크로드에 적합.
- `가속화된 컴퓨팅` : GPU 기반의 고성능 컴퓨팅이 실행되는 환경에 적합.
- `스토리지 최적화` : 로컬 디스크에 매우 큰 데이터의 액세스를 요구하는 워크로드에 적합.

### AWS 인스턴스 유형 구조

```bash
[인스턴스 패밀리][새대].[크기]
```

1. **인스턴스 패밀리 (첫 번째 문자)**

   ```
   t: 범용, 버스트 가능 (가변적 워크로드)
   m: 범용 (균형 잡힌 컴퓨팅, 메모리, 네트워킹)
   c: 컴퓨팅 최적화 (CPU 집약적 워크로드)
   r: 메모리 최적화 (메모리 집약적 워크로드)
   i: 스토리지 최적화 (고속 로컬 I/O)
   g: GPU 인스턴스 (그래픽 처리)
   p: GPU 가속 컴퓨팅 (머신러닝, 고성능 컴퓨팅)
   d: 밀도 스토리지 (대용량 데이터)
   f: FPGA 인스턴스 (하드웨어 가속)
   z: 고성능 컴퓨팅 (고주파 프로세서)
   x: 초대형 메모리 (대규모 인메모리 데이터베이스)
   a: Arm 프로세서 기반 (AWS Graviton)
   h: 스토리지 최적화 (고처리량)
   inf: AWS Inferentia 칩 (추론 최적화)
   trn: AWS Trainium 칩 (훈련 최적화)
   ```

2. **세대 (숫자)**

- 숫자는 세대를 나타낸다. (예: t2, t3, t4g).
- 숫자가 클수록 최신 세대.
- 'g'는 AWS Graviton 프로세서(ARM 기반)를 사용하는 인스턴스를 나타낸다.

3. **크기 (접미사)**

- nano, micro, small, medium, large
- xlarge, 2xlarge, 4xlarge, 8xlarge, 16xlarge 등
- 크기가 클수록 더 많은 리소스(CPU, 메모리, 네트워크 대역폭 등)를 제공합니다.

4. **추가 기능 식별자 (접미사)**

   ```
   a: AMD CPU
   n: 네트워크 최적화
   d: 인스턴스 스토어 볼륨 포함
   e: 추가 메모리
   g: AWS Graviton 프로세서
   -metal: 베어메탈 인스턴스
   ```

> 💡 현재 AWS 프리티어 정책은 t2.mico 인스턴스 한정으로, 1년간 매달 750시간의 EC2 인스턴스 무료 서비스를 제공한다.

### 인스턴스 상태

- 인스턴스 상태는 일반적으로 7가지로 분류된다.

1. 최초 인스턴스를 시작하는 행위 : `대기 중` -> `실행 중` (특별한 이상이 없을 경우)
2. 실행 중인 인스턴스를 중지하는 행위 : `실행 중` -> `중지 중` -> `중지됨`(인스턴스 종료 ❌, 중지 👌)
3. 중지된 인스턴스를 시작하는 행위 : `중지됨` -> `대기 중` -> `실행 중`
4. 중지된 인스턴스를 종료하는 행위 : `중지됨` -> `종료 중` -> `종료됨`(인스턴스 영구 삭제)
5. 실행 중이 인스턴스를 종료하는 행위 : `실행 중` -> `종료 중` -> `종료됨`(인스턴스 영구 삭제)

> 🚨 주의!  
> '중지됨' : '인스턴스를 유지한 채 일시적으로 중지한' 상태로, 재 구동 가능.  
> '종료됨' : '인스턴스를 영구 삭제한' 상태로, 재 사용 불가.

<br />

## 2.2.2 AMI(Amazon Machine Image)

- 인스턴스를 시작할 때 필요한 정보를 제공하는 것으로 **운영 체제와 소프트웨어를 적절히 구성한 상태로 제공되는 템플릿(template)**.
- 인스턴스를 생성할 경우 AMI를 지정해야 한다.
- 하나의 AMI로 동일한 구성의 여러 인스턴스를 손쉽게 생성할 수 있다.
- 사용자 정의의 AMI를 생서앟여 활용할 수도 있고, AWS Marketplace에서 제공하는 서드 파티용 AMI를 선택하거나 AWS 자체적으로 정의된 기본 AMI를 선택해서 활용할 수도 있다.

### 🌊 AMI 흐름

1. AWS에서 자체적으로 제공하는 기본 AMI로 EC2 인스턴스 생성.
2. 사용자 요구에 따라 변경 및 구성 하여 사용자 정의 AMI 이미지 생성.
3. 사용자 정의 AMI를 활용하여 다른 EC2 인스턴스를 생성할 수도 있음.
4. AMI는 동일 리전 또는 다른 리전으로 복사할 수 있고, AMI 등록을 취소할 수 있다.

<br/>

## 2.2.3 Amazon EC2 스토리지

- 스토리지(storage): 데이터를 저장하는 공간.
- 서버 자원에서 발생하는 데이터를 보관하기 위해 필수적으로 존재해야 하는 요소.
- EC2 인스턴스용 스토리지 유형은 기본적으로 `인스턴스 스토어(instance store)`와 블록 스토리지인 `Amazon EBS(Elastic Block Store)`로 나뉜다.

### 인스턴스 스토어

- 인스턴스에 바로 붙어 있는 저장소로, Amazon EC2 인스턴스를 생성하면 기본적으로 존재한다.
- 일부 인스턴스 유형은 인스턴스 스토어를 지원하지 않는다.
- 장점 : 매우 빠른 I/O(Input/Output)를 보장한다.
- 단점 :
  - EC2 인스턴스를 중지하거나 종료하면 인스턴스 스토어에 저장된 데이터가 모두 손실된다.
  - 임시적인 데이터 저장소로 생각하며, 장기적으로 보존해야 하는 데이터는 인스턴스 스토어에 저장하지 않는다.

### Amazon EBS

- 외장 하드디스크와 비슨한 개념으로 연상하면 이해하기 쉽다.
- 인스턴스에 연결 및 제거를 하는 형태로 구성되는 `블록 스토리지`.
- 인스턴스가 네트워킹을 통해 Amazon EBS에 접근하여 연결되는 구조.
- `영구 보존이 가능`하다.
- **관리 콘솔을 통해 스냅샷을 생성하여 백업하거나 연결을 해제한 후 다른 인스턴스에 연결할 수 있다.**

### 🤞 인스턴스 스토어와 Amazon EBS 차이점

| 구분          | 인스턴스 스토어 | Amazon EBS    |
| ------------- | --------------- | ------------- |
| 인스턴스 연결 | 직접 연결       | 네트워킹 연결 |
| I/O 속도      | 빠름            | 보통          |
| 데어터 보관   | 임시            | 영구          |
| 스냅샨(백업)  | 불가            | 가능          |

<br/>

> 💡 Amazon EC2 인스턴스용 스토리지 유형
>
> - 파일 스토리지 : EFS(Elastic File Store)
> - 오브젝트 스토리지 : S3(Simple Storage Service)

<br/>

## 2.2.4 Amazon EC2 네트워킹

- Amazon EC2는 어떤 서비스를 수행하는 특수한 목적으로 만들어진 가상 서버 자원이므로, 서비스를 제공하려면 자연스럽게 통신이 가능한 환경으로 구성되어야 한다.

### Amazon VPC(Virtual Private Cloud)

- AWS 퍼블릭 클라우드 안에서 논리적으로 격리된 가상의 클라우드 네트워크.
- EC2 인스턴스는 별도로 구성된 하나의 Amazon VPC안에 생성되어 네트워킹 된다.

### 네트워크 인터페이스

- '서로 연결한다'라는 의미로, 네트워킹을 수행하려면 네트워크 인터페이스(network interface)가 필요하다.
- AWS에서는 `ENI(Elastic Network Interface)`라는 논리적 네트워크 인터페이스가 VPC 내 생성된다.
- ENI를 EC2 인스턴스에 연결해서 네트워킹을 수행한다.

### IP 주소

- 네트워크 인터페이스에는 `IP(Internet Protocol)` 주소가 있다.
- **IP 주소로 대상을 구분하고 네트워킹을 수행한다.**
- `프라이빗 IP` : 내부 구간의 통신을 위한 **사설 IP.**
- `퍼블릭 IP` : 외부 구간의 통신을 위한 **공인 IP.**

## 2.2.5 Amazon EC2 보안

### 보안 그룹(security group)

- EC2 인스턴스의 **송수신 트래픽을 제어하는 가상의 방화벽 역할**을 한다.
- 수신 트래픽에 대한 `인바운드(inbound)` 규칙과 송신 트래빅에 대한 `아웃바운드(outbound)` 규칙으로 되어 있다.
- 대상 트래픽에 대한 허용과 거부를 결정한다.
- 트래픽을 정의하는 방법에는 `프로토콜`, `포트 번호`, `IP 대역` 등이 있다.

### 키 페어(key pair)

- EC2 인스턴스에 열결할 때 **자격을 증명하는 보안 키.**
- `퍼블릭 키` : EC2 인스턴스에 저장됨.
- `프라이빗 키` : 사용자 컴퓨터에 별도로 저장됨.

<br />

## 2.2.6 Amazon EC2 모니터링

- 서비스 안정성과 가용성, 성능 유지에 필요한 중요한 영역이다.
- 모니터링 계획 정의
  - 모니터링 목표
  - 모니터링 대상 지원
  - 모니터링 빈도
  - 모니터링 수행 도구
  - 모니터링 작업을 수행할 사람
  - 문제가 발생할 때 경보를 알려야할 대상

### 수동 모니터링 도구

- 관리자가 직접 관리 콘솔을 이용하여 모니터링 수행.
- EC2 대시보드에서 간단한 통계 정보를 확인하거나, CloudWatch라는 모니터링 전용 서비스를 이용하여 상세한 통계 정보를 모니터링 할 수 있다.

### 자동 모니터링 도구

- 대상 자원의 지표에 대해 임곗값을 정하고, **임곗값을 초과하면 경보를 내리는 형태의 동적인 모니터링 방법.**
- `Amazon CloudWatch` 경보 시스템을 이용하여 동적으로 단일 지표를 관찬하고 지정된 임곗값을 기준으로 경보 작업을 수행할 수 있다.
- 경보 작업은 `Amazon SNS(simple Notification Service)`라는 알림 시스템으로 관리자 이메일을 호출하거나 EC2 인스턴스 자원을 동적으로 확장할 수 있다.

## 2.2.7 Amazon EC2 인스턴스 구입 옵션

- 온디맨드 인스턴스 : 시작하는 인스턴스에 대한 비용을 초 단위로 지불.
- Savings Plans : 1년 또는 3년 동안 시간당 비용을 약정하여 일관된 컴퓨팅 사용량을 제공.
- 예약 인스턴스 : 1년 또는 3년 동안 인스턴스 유형오가 리전을 약정하여 일관된 인스턴스를 제공.
- 스팟 인스턴스 : 미사용 중인 인스턴스에 대해 경매 방식 형태로 할당하는 방식.

### ✍️ 요약

- `EC2(Elastic Fompute Cloud)` : 클라우드 환경에서 탄력적으로 확장 가능한 컴퓨팅 자원 제공 서비스.
- `EC2 인스턴스` : 가상의 컴퓨팅(가상 서버) 환경.
- `AMI(Amazon Machine Image)` : EC2 인스턴스에 대한 운영 체제와 소프트웨어를 정의한 템플릿.
- `EC2 스토리지` : EC2 인스턴스의 데이터 저장소
  - 인스턴스 스토어 : EC2 인스턴스에 바로 붙어 있는 기본적으로 생성되는 임시 저장소.
  - EBS(Elastic Block Store) : 인스턴스에 네트워킹을 ㅌㅇ해 연결 및 제거가 가능한 블록 스토리지.
- `EC2 네트워킹` : EC2 인스턴스가 통신할 수 있는 네트워크 환경.
  - VPC(virtual Private Cloud) : AWS 클라우드상 논리적으로 격리된 가사으이 클라우드 네트워크.
  - ENI(Elastic Network Interface) : VPC에 생성되는 네트워크 인터페이스로 EC2 인스턴스에 연결.
  - IP 주소 : EC2 인스턴스의 통신을 위한 네트워크 주소.
- `EC2 보안(security)` : EC2 인스턴스의 안정적인 서비스를 위한 보안 정책.
  - 보안 그룹(security group) : EC2 인스턴스에 대한 송수신 트래픽을 제어하는 접근 제어 정책.
  - 키 페어(key pair): EC2 인스턴스 접근에 대한 자격 증명을 위한 보안 키.
- `EC2 모니터링` : EC2 인스턴스의 자원 상태에 대한 수동 • 자동 모니터링
  - 수동 모니터링 : 관리자가 직접적으로 관리 콘소렝 접근하여 EC2 자원 모니터링
  - 자동 모니터링 : 특정 지표에 대한 임곗값 기준에 따라 동적인 경보 작업을 수행하는 모니터링.

<br />

# 2.3 [실습] Amazon EC2 인스턴스 배포 및 접근하기
